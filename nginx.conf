server {
    listen 80;

    # http://<서버IP>/btc/ 로 접속 시 btc_dashboard로 연결
    location /btc/ {
        # Docker 네트워크 내부에서 서비스 이름(btc_dashboard)으로 통신합니다.
        # Streamlit 컨테이너는 내부적으로 8501 포트를 사용합니다.
        proxy_pass http://btc_dashboard:8501/;

        # Streamlit의 실시간 업데이트(WebSocket)를 위한 설정
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }

    # http://<서버IP>/eth/ 로 접속 시 eth_dashboard로 연결
    location /eth/ {
        # Docker 네트워크 내부에서 서비스 이름(eth_dashboard)으로 통신합니다.
        # 이 컨테이너도 내부적으로는 8501 포트를 사용합니다.
        proxy_pass http://eth_dashboard:8501/;

        # Streamlit의 실시간 업데이트(WebSocket)를 위한 설정
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }
}